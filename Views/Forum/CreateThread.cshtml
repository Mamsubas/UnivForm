@model UnivForm.Models.ViewModels.CreateThreadViewModel
@{
    ViewData["Title"] = "Yeni Konu OluÅŸtur";
}

<div class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-md">
    <h1 class="text-3xl font-bold text-gray-800 mb-6">
        <i class="fas fa-plus-circle text-indigo-600 mr-2"></i>Yeni Konu OluÅŸtur
    </h1>

    <form asp-action="CreateThread" method="post" class="space-y-6">
        <div asp-validation-summary="ModelOnly" class="text-red-600 bg-red-50 p-3 rounded-md"></div>
        
        <div>
            <label asp-for="CategoryId" class="block text-sm font-medium text-gray-700 mb-1">Kategori</label>
            <select asp-for="CategoryId" asp-items="@ViewBag.Categories" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                <option value="">-- Kategori SeÃ§in --</option>
            </select>
            <span asp-validation-for="CategoryId" class="text-red-600 text-sm mt-1"></span>
        </div>

        <div>
            <label asp-for="Title" class="block text-sm font-medium text-gray-700 mb-1">Konu BaÅŸlÄ±ÄŸÄ±</label>
            <input asp-for="Title" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Konu baÅŸlÄ±ÄŸÄ±nÄ±zÄ± yazÄ±nÄ±z...">
            <span asp-validation-for="Title" class="text-red-600 text-sm mt-1"></span>
        </div>

        <div>
            <label asp-for="Content" class="block text-sm font-medium text-gray-700 mb-1">Ä°Ã§erik</label>
            <textarea asp-for="Content" rows="8" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Konu iÃ§eriÄŸinizi yazÄ±nÄ±z..."></textarea>
            <span asp-validation-for="Content" class="text-red-600 text-sm mt-1"></span>
        </div>

        <!-- Emoji Picker -->
        <div>
            <label asp-for="SelectedEmoji" class="block text-sm font-medium text-gray-700 mb-3">
                <i class="fas fa-smile mr-1"></i>Emoji SeÃ§in (Opsiyonel)
            </label>
            <div class="flex flex-wrap gap-2" id="emojiPicker">
                <button type="button" class="emoji-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:border-indigo-500 text-2xl transition" data-emoji="ğŸ˜€">ğŸ˜€</button>
                <button type="button" class="emoji-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:border-indigo-500 text-2xl transition" data-emoji="â“">â“</button>
                <button type="button" class="emoji-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:border-indigo-500 text-2xl transition" data-emoji="ğŸ‰">ğŸ‰</button>
                <button type="button" class="emoji-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:border-indigo-500 text-2xl transition" data-emoji="ğŸ’¡">ğŸ’¡</button>
                <button type="button" class="emoji-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:border-indigo-500 text-2xl transition" data-emoji="ğŸš€">ğŸš€</button>
                <button type="button" class="emoji-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:border-indigo-500 text-2xl transition" data-emoji="â¤ï¸">â¤ï¸</button>
                <button type="button" class="emoji-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:border-indigo-500 text-2xl transition" data-emoji="ğŸ‘">ğŸ‘</button>
                <button type="button" class="emoji-btn px-4 py-2 rounded-lg border-2 border-gray-300 hover:border-indigo-500 text-2xl transition" data-emoji="âš ï¸">âš ï¸</button>
            </div>
            <input type="hidden" asp-for="SelectedEmoji" id="selectedEmoji">
            <div id="selectedEmojiDisplay" class="mt-3 p-3 bg-indigo-50 rounded-lg hidden">
                SeÃ§ilen Emoji: <span id="selectedEmojiText" class="text-3xl"></span>
            </div>
        </div>

        <!-- GIF URL Picker -->
        <div>
            <label asp-for="GifUrl" class="block text-sm font-medium text-gray-700 mb-1">
                <i class="fas fa-film mr-1"></i>GIF URL'si (Opsiyonel)
            </label>
            <input type="text" asp-for="GifUrl" class="block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="GIF URL'sini giriniz (Ã¶rn: https://media.giphy.com/media/...)">
            <small class="text-gray-500 mt-1 block">PopÃ¼ler GIF kaynaklarÄ±: Giphy, Tenor, etc.</small>
            <span asp-validation-for="GifUrl" class="text-red-600 text-sm mt-1"></span>
            
            <!-- GIF Preview -->
            <div id="gifPreview" class="mt-3 hidden">
                <img id="gifImage" src="" alt="GIF Preview" class="max-h-64 rounded-lg border-2 border-indigo-200">
            </div>
        </div>

        <div class="flex justify-end gap-4">
            <a asp-action="Index" class="inline-flex items-center px-6 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none transition">
                <i class="fas fa-times mr-2"></i>Ä°ptal
            </a>
            <a asp-controller="Category" asp-action="Create" class="inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sky-600 hover:bg-sky-700 focus:outline-none transition">
                <i class="fas fa-plus mr-2"></i>Yeni Kategori Ekle
            </a>
            <button type="submit" class="inline-flex justify-center items-center py-2 px-6 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none transition">
                <i class="fas fa-paper-plane mr-2"></i>Konuyu OluÅŸtur
            </button>
        </div>
    </form>
</div>

<script>
// Emoji picker functionality
document.querySelectorAll('.emoji-btn').forEach(btn => {
    btn.addEventListener('click', function(e) {
        e.preventDefault();
        const emoji = this.dataset.emoji;
        document.getElementById('selectedEmoji').value = emoji;
        document.getElementById('selectedEmojiText').textContent = emoji;
        document.getElementById('selectedEmojiDisplay').classList.remove('hidden');
        
        // Update button styles
        document.querySelectorAll('.emoji-btn').forEach(b => b.classList.remove('border-indigo-500', 'bg-indigo-100'));
        this.classList.add('border-indigo-500', 'bg-indigo-100');
    });
});

// GIF URL preview
document.getElementById('SelectedGifUrl').addEventListener('change', function() {
    const url = this.value.trim();
    if (url) {
        document.getElementById('gifImage').src = url;
        document.getElementById('gifPreview').classList.remove('hidden');
    } else {
        document.getElementById('gifPreview').classList.add('hidden');
    }
});
</script>
